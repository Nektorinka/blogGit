{"ast":null,"code":"import _toConsumableArray from\"/Users/apple/Documents/GIT/blogGit/blogGit/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _slicedToArray from\"/Users/apple/Documents/GIT/blogGit/blogGit/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from'react';import{connect}from'react-redux';import{useForm}from'react-hook-form';import{Redirect,withRouter}from'react-router-dom';import'./signUp.scss';import{renderTags}from'./formsFunctions';import*as actions from'../../Redux/Actions/actions';import ServiceApi from'../../services/serviceApi';function CreateNewArticle(_ref){var mainState=_ref.mainState,history=_ref.history;var _useState=useState([]),_useState2=_slicedToArray(_useState,2),tagsState=_useState2[0],setTag=_useState2[1];var _useForm=useForm(),register=_useForm.register,handleSubmit=_useForm.handleSubmit,errors=_useForm.errors;var isLogged=mainState.isLogged;var myService=new ServiceApi();var onSubmit=function onSubmit(data){var token=mainState.loggedInfo.user.token;data.tags=tagsState;myService.createArticle(token,data).then(function(res){return history.push('/');});};var inputRef=React.createRef();if(!isLogged){return/*#__PURE__*/React.createElement(Redirect,{to:\"/sign-in\"});}return/*#__PURE__*/React.createElement(\"div\",{className:\"new-article  \"},/*#__PURE__*/React.createElement(\"form\",{onSubmit:handleSubmit(onSubmit),className:\"sign_up_form form\"},/*#__PURE__*/React.createElement(\"div\",{className:\"form__header-container\"},/*#__PURE__*/React.createElement(\"h1\",{className:\"form__header\"},\"Create new article\")),/*#__PURE__*/React.createElement(\"label\",{className:\"form__input-group\"},/*#__PURE__*/React.createElement(\"span\",{className:\"form__input-label' + \".concat(errors.title?' form__input-label--error':null)},\"Title\"),/*#__PURE__*/React.createElement(\"input\",{type:\"text\",name:\"title\",placeholder:\"title\",className:\"form__input \".concat(errors.title?' form__input--error':null),ref:register({required:'Заполните поле',maxLength:{value:100,message:'Заголовок должен быть менее 100 символов'}})}),errors.title&&/*#__PURE__*/React.createElement(\"span\",{className:\"form__input-label form__input-label--error\"},errors.title.message)),/*#__PURE__*/React.createElement(\"label\",{className:\"form__input-group\"},/*#__PURE__*/React.createElement(\"span\",{className:\"form__input-label' + \".concat(errors.shortDescription?' form__input-label--error':null)},\"Short description\"),/*#__PURE__*/React.createElement(\"input\",{type:\"text\",name:\"shortDescription\",placeholder:\"title\",className:\"form__input \".concat(errors.shortDescription?' form__input--error':null),ref:register({required:'Заполните поле',maxLength:{value:400,message:'Описание должно быть менее 400 символов'}})}),errors.shortDescription&&/*#__PURE__*/React.createElement(\"span\",{className:\"form__input-label form__input-label--error\"},errors.shortDescription.message)),/*#__PURE__*/React.createElement(\"label\",{className:\"form__input-group\"},/*#__PURE__*/React.createElement(\"span\",{className:\"form__input-label' + \".concat(errors.text?' form__input-label--error':null)},\"Text\"),/*#__PURE__*/React.createElement(\"textarea\",{type:\"text\",name:\"text\",placeholder:\"text\",className:\"form__input form__text-area \".concat(errors.text?' form__input--error':null),rows:\"6\",ref:register({required:'Заполните поле',maxLength:{value:800,message:'Статья должна быть менее 800 символов'}})}),errors.text&&/*#__PURE__*/React.createElement(\"span\",{className:\"form__input-label form__input-label--error\"},errors.text.message)),/*#__PURE__*/React.createElement(\"div\",{className:\"form__tags\"},renderTags(tagsState,{tagsState:tagsState,setTag:setTag}),/*#__PURE__*/React.createElement(\"div\",{className:\"form__tag\"},/*#__PURE__*/React.createElement(\"input\",{type:\"text\",name:\"addTag\",id:\"addTag\",className:\"form__input\",placeholder:\"Tag\",ref:inputRef}),/*#__PURE__*/React.createElement(\"button\",{type:\"button\",className:\"form__delet-tag-btn mg-right--15px\",onClick:function onClick(){return setTag([]);}},\"Delete\"),/*#__PURE__*/React.createElement(\"button\",{type:\"button\",className:\"form__add-tag-btn \",onClick:function onClick(){if(inputRef.current.value!==''){setTag([].concat(_toConsumableArray(tagsState),[inputRef.current.value]));inputRef.current.value='';}}},\"Add tag\"))),/*#__PURE__*/React.createElement(\"button\",{type:\"submit\",className:\"form__submit new-article__send-btn mg-top--10px mg-bottom--40px\"},\"Send\")));}var mapStateToProps=function mapStateToProps(state){return{mainState:state.mainReducer};};export default withRouter(connect(mapStateToProps,actions)(CreateNewArticle));","map":{"version":3,"sources":["/Users/apple/Documents/GIT/blogGit/blogGit/src/components/Forms/CeateNewArticle.jsx"],"names":["React","useState","useEffect","connect","useForm","Redirect","withRouter","renderTags","actions","ServiceApi","CreateNewArticle","mainState","history","tagsState","setTag","register","handleSubmit","errors","isLogged","myService","onSubmit","data","token","loggedInfo","user","tags","createArticle","then","res","push","inputRef","createRef","title","required","maxLength","value","message","shortDescription","text","current","mapStateToProps","state","mainReducer"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { connect } from 'react-redux';\nimport { useForm } from 'react-hook-form';\nimport { Redirect, withRouter } from 'react-router-dom';\nimport './signUp.scss';\nimport { renderTags } from './formsFunctions';\nimport * as actions from '../../Redux/Actions/actions';\nimport ServiceApi from '../../services/serviceApi';\n\nfunction CreateNewArticle({ mainState, history }) {\n\tconst [ tagsState, setTag ] = useState([]);\n\n\tconst { register, handleSubmit, errors } = useForm();\n\n\tconst { isLogged } = mainState;\n\n\tconst myService = new ServiceApi();\n\tconst onSubmit = (data) => {\n\t\tconst { token } = mainState.loggedInfo.user;\n\t\tdata.tags = tagsState;\n\t\tmyService.createArticle(token, data).then((res) => history.push('/'));\n\t};\n\n\tconst inputRef = React.createRef();\n\n\tif (!isLogged) {\n\t\treturn <Redirect to=\"/sign-in\" />;\n\t}\n\treturn (\n\t\t<div className=\"new-article  \">\n\t\t\t<form onSubmit={handleSubmit(onSubmit)} className=\"sign_up_form form\">\n\t\t\t\t<div className=\"form__header-container\">\n\t\t\t\t\t<h1 className=\"form__header\">Create new article</h1>\n\t\t\t\t</div>\n\t\t\t\t<label className=\"form__input-group\">\n\t\t\t\t\t<span className={`form__input-label' + ${errors.title ? ' form__input-label--error' : null}`}>\n\t\t\t\t\t\tTitle\n\t\t\t\t\t</span>\n\t\t\t\t\t<input\n\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\tname=\"title\"\n\t\t\t\t\t\tplaceholder=\"title\"\n\t\t\t\t\t\tclassName={`form__input ${errors.title ? ' form__input--error' : null}`}\n\t\t\t\t\t\tref={register({\n\t\t\t\t\t\t\trequired: 'Заполните поле',\n\t\t\t\t\t\t\tmaxLength: { value: 100, message: 'Заголовок должен быть менее 100 символов' }\n\t\t\t\t\t\t})}\n\t\t\t\t\t/>\n\t\t\t\t\t{errors.title && (\n\t\t\t\t\t\t<span className=\"form__input-label form__input-label--error\">{errors.title.message}</span>\n\t\t\t\t\t)}\n\t\t\t\t</label>\n\t\t\t\t<label className=\"form__input-group\">\n\t\t\t\t\t<span\n\t\t\t\t\t\tclassName={`form__input-label' + ${errors.shortDescription\n\t\t\t\t\t\t\t? ' form__input-label--error'\n\t\t\t\t\t\t\t: null}`}\n\t\t\t\t\t>\n\t\t\t\t\t\tShort description\n\t\t\t\t\t</span>\n\t\t\t\t\t<input\n\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\tname=\"shortDescription\"\n\t\t\t\t\t\tplaceholder=\"title\"\n\t\t\t\t\t\tclassName={`form__input ${errors.shortDescription ? ' form__input--error' : null}`}\n\t\t\t\t\t\tref={register({\n\t\t\t\t\t\t\trequired: 'Заполните поле',\n\t\t\t\t\t\t\tmaxLength: { value: 400, message: 'Описание должно быть менее 400 символов' }\n\t\t\t\t\t\t})}\n\t\t\t\t\t/>\n\t\t\t\t\t{errors.shortDescription && (\n\t\t\t\t\t\t<span className=\"form__input-label form__input-label--error\">\n\t\t\t\t\t\t\t{errors.shortDescription.message}\n\t\t\t\t\t\t</span>\n\t\t\t\t\t)}\n\t\t\t\t</label>\n\t\t\t\t<label className=\"form__input-group\">\n\t\t\t\t\t<span className={`form__input-label' + ${errors.text ? ' form__input-label--error' : null}`}>\n\t\t\t\t\t\tText\n\t\t\t\t\t</span>\n\t\t\t\t\t<textarea\n\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\tname=\"text\"\n\t\t\t\t\t\tplaceholder=\"text\"\n\t\t\t\t\t\tclassName={`form__input form__text-area ${errors.text ? ' form__input--error' : null}`}\n\t\t\t\t\t\trows=\"6\"\n\t\t\t\t\t\tref={register({\n\t\t\t\t\t\t\trequired: 'Заполните поле',\n\t\t\t\t\t\t\tmaxLength: { value: 800, message: 'Статья должна быть менее 800 символов' }\n\t\t\t\t\t\t})}\n\t\t\t\t\t/>\n\t\t\t\t\t{errors.text && (\n\t\t\t\t\t\t<span className=\"form__input-label form__input-label--error\">{errors.text.message}</span>\n\t\t\t\t\t)}\n\t\t\t\t</label>\n\t\t\t\t<div className=\"form__tags\">\n\t\t\t\t\t{renderTags(tagsState, { tagsState, setTag })}\n\t\t\t\t\t<div className=\"form__tag\">\n\t\t\t\t\t\t<input\n\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\tname=\"addTag\"\n\t\t\t\t\t\t\tid=\"addTag\"\n\t\t\t\t\t\t\tclassName=\"form__input\"\n\t\t\t\t\t\t\tplaceholder=\"Tag\"\n\t\t\t\t\t\t\tref={inputRef}\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<button type=\"button\" className=\"form__delet-tag-btn mg-right--15px\" onClick={() => setTag([])}>\n\t\t\t\t\t\t\tDelete\n\t\t\t\t\t\t</button>\n\t\t\t\t\t\t<button\n\t\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\t\tclassName=\"form__add-tag-btn \"\n\t\t\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\t\t\tif (inputRef.current.value !== '') {\n\t\t\t\t\t\t\t\t\tsetTag([ ...tagsState, inputRef.current.value ]);\n\t\t\t\t\t\t\t\t\tinputRef.current.value = '';\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\tAdd tag\n\t\t\t\t\t\t</button>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\n\t\t\t\t<button type=\"submit\" className=\"form__submit new-article__send-btn mg-top--10px mg-bottom--40px\">\n\t\t\t\t\tSend\n\t\t\t\t</button>\n\t\t\t</form>\n\t\t</div>\n\t);\n}\n\nconst mapStateToProps = (state) => {\n\treturn {\n\t\tmainState: state.mainReducer\n\t};\n};\n\nexport default withRouter(connect(mapStateToProps, actions)(CreateNewArticle));\n"]},"metadata":{},"sourceType":"module"}
{"ast":null,"code":"var _jsxFileName = \"/Users/apple/Documents/GIT/blogGit/blogGit/src/components/Forms/SignIn.jsx\";\nimport React, { useEffect, useState } from 'react';\nimport { connect } from 'react-redux';\nimport { Link, withRouter, Redirect } from 'react-router-dom';\nimport { useForm } from 'react-hook-form';\nimport './signUp.scss';\nimport { Alert } from 'antd';\nimport * as actions from '../../Redux/Actions/actions';\nimport ServiceApi from '../../services/serviceApi';\nimport { renderErrors } from './formsFunctions';\n\nfunction SignIn({\n  logIn,\n  setErrorInMain,\n  mainState,\n  history\n}) {\n  const [sucsessLog, setSucsessLog] = useState(false);\n  const {\n    register,\n    handleSubmit,\n    errors\n  } = useForm();\n  const myService = new ServiceApi();\n\n  async function onSubmit(data) {\n    try {\n      const response = await myService.sigIn({\n        user: {\n          email: data.email,\n          password: data.password\n        }\n      });\n\n      if (response.errors) {\n        return setErrorInMain(response.errors);\n      } else {\n        logIn(response);\n        setSucsessLog(true);\n        return setTimeout(() => {\n          history.push('/');\n        }, 1500);\n      }\n    } catch (err) {\n      const response = await myService.sigIn({\n        user: {\n          email: data.email,\n          password: data.password\n        }\n      });\n\n      if (response.errors) {\n        return setErrorInMain(response.errors);\n      } else {\n        logIn(response);\n        setSucsessLog(true);\n        return setTimeout(() => {\n          history.push('/');\n        }, 1500);\n      }\n    }\n  }\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"sign_up\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 3\n    }\n  }, /*#__PURE__*/React.createElement(\"form\", {\n    onSubmit: handleSubmit(onSubmit),\n    className: \"sign_up_form form\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 4\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"form__header-container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"h1\", {\n    className: \"form__header\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 6\n    }\n  }, \"Sign In\")), /*#__PURE__*/React.createElement(\"label\", {\n    className: \"form__input-group\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    className: \"form__input-label\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 6\n    }\n  }, \"Email address\"), /*#__PURE__*/React.createElement(\"input\", {\n    autoFocus: true,\n    type: \"email\",\n    name: \"email\",\n    placeholder: \"Email address\",\n    className: \"form__input\",\n    ref: register({\n      required: 'Введите email',\n      pattern: {\n        value: /^[A-Z0-9._%+-]+@[A-Z0-9.-]+\\.[A-Z]{2,}$/i,\n        message: 'Введите корректный email'\n      }\n    }),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 6\n    }\n  }), errors.email && /*#__PURE__*/React.createElement(\"span\", {\n    className: \"form__input-label form__input-label--error\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 7\n    }\n  }, errors.email.message)), /*#__PURE__*/React.createElement(\"label\", {\n    className: \"form__input-group\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    className: \"form__input-label\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 6\n    }\n  }, \"Password\"), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"password\",\n    name: \"password\",\n    placeholder: \"Password\",\n    className: \"form__input\",\n    ref: register({\n      required: 'Введите пароль',\n      minLength: {\n        value: 6,\n        message: 'Пароль должен быть от 6 до 40 символов'\n      },\n      maxLength: {\n        value: 40,\n        message: 'Пароль должен быть от 6 до 40 символов'\n      }\n    }),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 6\n    }\n  }), errors.password && /*#__PURE__*/React.createElement(\"span\", {\n    className: \"form__input-label form__input-label--error\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 7\n    }\n  }, errors.password.message)), /*#__PURE__*/React.createElement(\"button\", {\n    type: \"submit\",\n    className: \"form__submit\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 5\n    }\n  }, \"Login\"), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"form__container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    className: \"form__text\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 6\n    }\n  }, \"Don't have an account?\", ' ', /*#__PURE__*/React.createElement(Link, {\n    className: \"form__link\",\n    to: \"/sign-up\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 7\n    }\n  }, \"Sign In.\"))), sucsessLog ? /*#__PURE__*/React.createElement(Alert, {\n    message: \"Success\",\n    type: \"success\",\n    style: {\n      marginBottom: '20px'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 19\n    }\n  }) : null, mainState.error ? renderErrors(mainState.error) : null));\n}\n\nconst mapStateToProps = state => {\n  return {\n    mainState: state.mainReducer\n  };\n};\n\nexport default withRouter(connect(mapStateToProps, actions)(SignIn));","map":{"version":3,"sources":["/Users/apple/Documents/GIT/blogGit/blogGit/src/components/Forms/SignIn.jsx"],"names":["React","useEffect","useState","connect","Link","withRouter","Redirect","useForm","Alert","actions","ServiceApi","renderErrors","SignIn","logIn","setErrorInMain","mainState","history","sucsessLog","setSucsessLog","register","handleSubmit","errors","myService","onSubmit","data","response","sigIn","user","email","password","setTimeout","push","err","required","pattern","value","message","minLength","maxLength","marginBottom","error","mapStateToProps","state","mainReducer"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { connect } from 'react-redux';\nimport { Link, withRouter, Redirect } from 'react-router-dom';\nimport { useForm } from 'react-hook-form';\nimport './signUp.scss';\nimport { Alert } from 'antd';\nimport * as actions from '../../Redux/Actions/actions';\nimport ServiceApi from '../../services/serviceApi';\nimport { renderErrors } from './formsFunctions';\n\nfunction SignIn({ logIn, setErrorInMain, mainState, history }) {\n\tconst [ sucsessLog, setSucsessLog ] = useState(false);\n\n\tconst { register, handleSubmit, errors } = useForm();\n\tconst myService = new ServiceApi();\n\tasync function onSubmit(data) {\n\t\ttry {\n\t\t\tconst response = await myService.sigIn({\n\t\t\t\tuser: {\n\t\t\t\t\temail: data.email,\n\t\t\t\t\tpassword: data.password\n\t\t\t\t}\n\t\t\t});\n\t\t\tif (response.errors) {\n\t\t\t\treturn setErrorInMain(response.errors);\n\t\t\t} else {\n\t\t\t\tlogIn(response);\n\t\t\t\tsetSucsessLog(true);\n\n\t\t\t\treturn setTimeout(() => {\n\t\t\t\t\thistory.push('/');\n\t\t\t\t}, 1500);\n\t\t\t}\n\t\t} catch (err) {\n\t\t\tconst response = await myService.sigIn({\n\t\t\t\tuser: {\n\t\t\t\t\temail: data.email,\n\t\t\t\t\tpassword: data.password\n\t\t\t\t}\n\t\t\t});\n\t\t\tif (response.errors) {\n\t\t\t\treturn setErrorInMain(response.errors);\n\t\t\t} else {\n\t\t\t\tlogIn(response);\n\t\t\t\tsetSucsessLog(true);\n\t\t\t\treturn setTimeout(() => {\n\t\t\t\t\thistory.push('/');\n\t\t\t\t}, 1500);\n\t\t\t}\n\t\t}\n\t}\n\n\treturn (\n\t\t<div className=\"sign_up\">\n\t\t\t<form onSubmit={handleSubmit(onSubmit)} className=\"sign_up_form form\">\n\t\t\t\t<div className=\"form__header-container\">\n\t\t\t\t\t<h1 className=\"form__header\">Sign In</h1>\n\t\t\t\t</div>\n\t\t\t\t<label className=\"form__input-group\">\n\t\t\t\t\t<span className=\"form__input-label\">Email address</span>\n\t\t\t\t\t<input\n\t\t\t\t\t\tautoFocus\n\t\t\t\t\t\ttype=\"email\"\n\t\t\t\t\t\tname=\"email\"\n\t\t\t\t\t\tplaceholder=\"Email address\"\n\t\t\t\t\t\tclassName=\"form__input\"\n\t\t\t\t\t\tref={register({\n\t\t\t\t\t\t\trequired: 'Введите email',\n\t\t\t\t\t\t\tpattern: {\n\t\t\t\t\t\t\t\tvalue: /^[A-Z0-9._%+-]+@[A-Z0-9.-]+\\.[A-Z]{2,}$/i,\n\t\t\t\t\t\t\t\tmessage: 'Введите корректный email'\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t})}\n\t\t\t\t\t/>\n\t\t\t\t\t{errors.email && (\n\t\t\t\t\t\t<span className=\"form__input-label form__input-label--error\">{errors.email.message}</span>\n\t\t\t\t\t)}\n\t\t\t\t</label>\n\t\t\t\t<label className=\"form__input-group\">\n\t\t\t\t\t<span className=\"form__input-label\">Password</span>\n\t\t\t\t\t<input\n\t\t\t\t\t\ttype=\"password\"\n\t\t\t\t\t\tname=\"password\"\n\t\t\t\t\t\tplaceholder=\"Password\"\n\t\t\t\t\t\tclassName=\"form__input\"\n\t\t\t\t\t\tref={register({\n\t\t\t\t\t\t\trequired: 'Введите пароль',\n\t\t\t\t\t\t\tminLength: { value: 6, message: 'Пароль должен быть от 6 до 40 символов' },\n\t\t\t\t\t\t\tmaxLength: { value: 40, message: 'Пароль должен быть от 6 до 40 символов' }\n\t\t\t\t\t\t})}\n\t\t\t\t\t/>\n\t\t\t\t\t{errors.password && (\n\t\t\t\t\t\t<span className=\"form__input-label form__input-label--error\">{errors.password.message}</span>\n\t\t\t\t\t)}\n\t\t\t\t</label>\n\n\t\t\t\t<button type=\"submit\" className=\"form__submit\">\n\t\t\t\t\tLogin\n\t\t\t\t</button>\n\t\t\t\t<div className=\"form__container\">\n\t\t\t\t\t<span className=\"form__text\">\n\t\t\t\t\t\tDon't have an account?{' '}\n\t\t\t\t\t\t<Link className=\"form__link\" to=\"/sign-up\">\n\t\t\t\t\t\t\tSign In.\n\t\t\t\t\t\t</Link>\n\t\t\t\t\t</span>\n\t\t\t\t</div>\n\t\t\t\t{sucsessLog ? <Alert message=\"Success\" type=\"success\" style={{ marginBottom: '20px' }} /> : null}\n\t\t\t\t{mainState.error ? renderErrors(mainState.error) : null}\n\t\t\t</form>\n\t\t</div>\n\t);\n}\n\nconst mapStateToProps = (state) => {\n\treturn {\n\t\tmainState: state.mainReducer\n\t};\n};\n\nexport default withRouter(connect(mapStateToProps, actions)(SignIn));\n"]},"metadata":{},"sourceType":"module"}
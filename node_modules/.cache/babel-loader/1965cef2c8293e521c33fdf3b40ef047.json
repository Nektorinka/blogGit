{"ast":null,"code":"import _slicedToArray from\"/Users/apple/Documents/GIT/blogGit/blogGit/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState}from'react';import{connect}from'react-redux';import{withRouter}from'react-router-dom';import'./article.scss';import{HeartOutlined}from'@ant-design/icons';import{Popconfirm}from'antd';import Markdown from'markdown-to-jsx';import{renderTags,renderDate}from'./articleFunctions';import ServiceApi from'../../services/serviceApi';import*as actions from'../../Redux/Actions/actions';function FulllArticle(_ref){var slug=_ref.slug,history=_ref.history,mainState=_ref.mainState;var _useState=useState([]),_useState2=_slicedToArray(_useState,2),data=_useState2[0],setData=_useState2[1];var myService=new ServiceApi();useEffect(function(){if(isLogged){myService.getFullArticle(slug.slug,mainState.loggedInfo.user.token).then(function(res){return setData(res);});}else{myService.getFullArticle(slug.slug).then(function(res){return setData(res);});}},[mainState]);var isLogged=mainState.isLogged;var text='Are you sure to delete this article?';function confirm(){myService.deleteArticle(mainState.loggedInfo.user.token,slug.slug).then(function(res){return history.push('/');});}if(data.article){return/*#__PURE__*/React.createElement(\"div\",{className:\"article-container\"},/*#__PURE__*/React.createElement(\"div\",{className:\"article__full\"},/*#__PURE__*/React.createElement(\"div\",{className:\"article__content\"},/*#__PURE__*/React.createElement(\"div\",{className:\"article__header\"},/*#__PURE__*/React.createElement(\"h2\",{className:\"article__title\"},data.article.title),/*#__PURE__*/React.createElement(\"div\",{className:\"article__like \".concat(data.article.favorited?\"article__like--active\":\"\",\" \")},/*#__PURE__*/React.createElement(HeartOutlined,{onClick:function onClick(){if(isLogged){if(!data.article.favorited){myService.setLike(slug.slug,mainState.loggedInfo.user.token).then(function(response){return setData(response);});}else{myService.unsetLike(slug.slug,mainState.loggedInfo.user.token).then(function(response){return setData(response);});}}else{history.push('/sign-in');}}}),/*#__PURE__*/React.createElement(\"span\",{className:\"article__like-counter\"},data.article.favoritesCount))),/*#__PURE__*/React.createElement(\"div\",{className:\"article__tags\"},renderTags(data.article.tagList)),/*#__PURE__*/React.createElement(\"div\",{className:\"article__article-full\"},data.article.description)),/*#__PURE__*/React.createElement(\"div\",{className:\"article__author-block\"},/*#__PURE__*/React.createElement(\"div\",{className:\"article__author-description\"},/*#__PURE__*/React.createElement(\"h3\",{className:\"article__autor\"},data.article.author.username),/*#__PURE__*/React.createElement(\"h4\",{className:\"article__date\"},renderDate(data.article.createdAt),\" \"),/*#__PURE__*/React.createElement(\"div\",{className:\"article__btns\"},/*#__PURE__*/React.createElement(\"button\",{type:\"button\",className:\"article__edit-btn \".concat(!isLogged?\"article__edit-btn--disable\":null),onClick:function onClick(){history.push(\"/articles/\".concat(slug.slug,\"/edit\"));}},\"Edit\"),/*#__PURE__*/React.createElement(Popconfirm,{placement:\"right\",title:text,onConfirm:confirm,okText:\"Yes\",cancelText:\"No\"},/*#__PURE__*/React.createElement(\"button\",{type:\"button\",className:\"article__delete-btn \".concat(!isLogged?\"article__delete-btn--disable\":null)},\"Delete\")))),/*#__PURE__*/React.createElement(\"div\",{clclassNames:\"article__author-avatar\"},/*#__PURE__*/React.createElement(\"img\",{src:data.article.author.image,alt:\"author-avatar\",className:\"article__image\"})))),/*#__PURE__*/React.createElement(\"div\",{className:\"article__body\"},/*#__PURE__*/React.createElement(Markdown,null,data.article.body)));}return null;}var mapStateToProps=function mapStateToProps(state){return{mainState:state.mainReducer};};export default withRouter(connect(mapStateToProps,actions)(FulllArticle));","map":{"version":3,"sources":["/Users/apple/Documents/GIT/blogGit/blogGit/src/components/Article/FullArticle.jsx"],"names":["React","useEffect","useState","connect","withRouter","HeartOutlined","Popconfirm","Markdown","renderTags","renderDate","ServiceApi","actions","FulllArticle","slug","history","mainState","data","setData","myService","isLogged","getFullArticle","loggedInfo","user","token","then","res","text","confirm","deleteArticle","push","article","title","favorited","setLike","response","unsetLike","favoritesCount","tagList","description","author","username","createdAt","image","body","mapStateToProps","state","mainReducer"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { connect } from 'react-redux';\nimport { withRouter } from 'react-router-dom';\nimport './article.scss';\nimport { HeartOutlined } from '@ant-design/icons';\nimport { Popconfirm } from 'antd';\nimport Markdown from 'markdown-to-jsx';\nimport { renderTags, renderDate } from './articleFunctions';\nimport ServiceApi from '../../services/serviceApi';\nimport * as actions from '../../Redux/Actions/actions';\n\nfunction FulllArticle({ slug, history, mainState }) {\n\tconst [ data, setData ] = useState([]);\n\tconst myService = new ServiceApi();\n\tuseEffect(\n\t\t() => {\n\t\t\tif (isLogged) {\n\t\t\t\tmyService.getFullArticle(slug.slug, mainState.loggedInfo.user.token).then((res) => {\n\t\t\t\t\treturn setData(res);\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tmyService.getFullArticle(slug.slug).then((res) => {\n\t\t\t\t\treturn setData(res);\n\t\t\t\t});\n\t\t\t}\n\t\t},\n\t\t[ mainState ]\n\t);\n\n\tconst { isLogged } = mainState;\n\n\tconst text = 'Are you sure to delete this article?';\n\n\tfunction confirm() {\n\t\tmyService.deleteArticle(mainState.loggedInfo.user.token, slug.slug).then((res) => history.push('/'));\n\t}\n\n\tif (data.article) {\n\t\treturn (\n\t\t\t<div className=\"article-container\">\n\t\t\t\t<div className=\"article__full\">\n\t\t\t\t\t<div className=\"article__content\">\n\t\t\t\t\t\t<div className=\"article__header\">\n\t\t\t\t\t\t\t<h2 className=\"article__title\">{data.article.title}</h2>\n\t\t\t\t\t\t\t<div className={`article__like ${data.article.favorited ? `article__like--active` : ``} `}>\n\t\t\t\t\t\t\t\t<HeartOutlined\n\t\t\t\t\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\t\t\t\t\tif (isLogged) {\n\t\t\t\t\t\t\t\t\t\t\tif (!data.article.favorited) {\n\t\t\t\t\t\t\t\t\t\t\t\tmyService\n\t\t\t\t\t\t\t\t\t\t\t\t\t.setLike(slug.slug, mainState.loggedInfo.user.token)\n\t\t\t\t\t\t\t\t\t\t\t\t\t.then((response) => setData(response));\n\t\t\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\t\t\tmyService\n\t\t\t\t\t\t\t\t\t\t\t\t\t.unsetLike(slug.slug, mainState.loggedInfo.user.token)\n\t\t\t\t\t\t\t\t\t\t\t\t\t.then((response) => setData(response));\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\t\thistory.push('/sign-in');\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t<span className=\"article__like-counter\">{data.article.favoritesCount}</span>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div className=\"article__tags\">{renderTags(data.article.tagList)}</div>\n\t\t\t\t\t\t<div className=\"article__article-full\">{data.article.description}</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className=\"article__author-block\">\n\t\t\t\t\t\t<div className=\"article__author-description\">\n\t\t\t\t\t\t\t<h3 className=\"article__autor\">{data.article.author.username}</h3>\n\t\t\t\t\t\t\t<h4 className=\"article__date\">{renderDate(data.article.createdAt)} </h4>\n\t\t\t\t\t\t\t<div className=\"article__btns\">\n\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\t\t\t\tclassName={`article__edit-btn ${!isLogged ? `article__edit-btn--disable` : null}`}\n\t\t\t\t\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\t\t\t\t\thistory.push(`/articles/${slug.slug}/edit`);\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\tEdit\n\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t<Popconfirm\n\t\t\t\t\t\t\t\t\tplacement=\"right\"\n\t\t\t\t\t\t\t\t\ttitle={text}\n\t\t\t\t\t\t\t\t\tonConfirm={confirm}\n\t\t\t\t\t\t\t\t\tokText=\"Yes\"\n\t\t\t\t\t\t\t\t\tcancelText=\"No\"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\t\t\t\t\tclassName={`article__delete-btn ${!isLogged\n\t\t\t\t\t\t\t\t\t\t\t? `article__delete-btn--disable`\n\t\t\t\t\t\t\t\t\t\t\t: null}`}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\tDelete\n\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t</Popconfirm>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div clclassNames=\"article__author-avatar\">\n\t\t\t\t\t\t\t<img src={data.article.author.image} alt=\"author-avatar\" className=\"article__image\" />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div className=\"article__body\">\n\t\t\t\t\t<Markdown>{data.article.body}</Markdown>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t);\n\t}\n\n\treturn null;\n}\n\nconst mapStateToProps = (state) => {\n\treturn {\n\t\tmainState: state.mainReducer\n\t};\n};\n\nexport default withRouter(connect(mapStateToProps, actions)(FulllArticle));\n"]},"metadata":{},"sourceType":"module"}
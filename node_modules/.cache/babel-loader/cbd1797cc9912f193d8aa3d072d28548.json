{"ast":null,"code":"var _jsxFileName = \"/Users/apple/Documents/GIT/blogGit/blogGit/src/components/Forms/SignUp.jsx\";\nimport React, { useEffect, useState } from 'react';\nimport { connect } from 'react-redux';\nimport { Link, Redirect } from 'react-router-dom';\nimport { useForm } from 'react-hook-form';\nimport './signUp.scss';\nimport { Alert } from 'antd';\nimport * as actions from '../../Redux/Actions/actions';\nimport { myService } from '../../services/serviceApi';\nimport { renderErrors } from './formsFunctions';\n\nfunction SignUp({\n  setUserInfo,\n  setErrorInMain,\n  mainState\n}) {\n  const [redirect, setredirect] = useState(false);\n  const [sucsessReg, setSucsessReg] = useState(false);\n  const {\n    register,\n    handleSubmit,\n    errors,\n    watch\n  } = useForm();\n\n  async function onSubmit(data) {\n    try {\n      const response = await myService.signUp({\n        user: {\n          username: data.username,\n          email: data.email,\n          password: data.password\n        }\n      });\n\n      if (response.errors) {\n        return setErrorInMain(response.errors);\n      } else {\n        setUserInfo(response);\n        setSucsessReg(true);\n        return setTimeout(() => {\n          setredirect(true);\n        }, 3000);\n      }\n    } catch (err) {\n      const response = await myService.signUp({\n        user: {\n          username: data.username,\n          email: data.email,\n          password: data.password\n        }\n      });\n\n      if (response.errors) {\n        return setErrorInMain(response.errors);\n      } else {\n        setUserInfo(response);\n        setSucsessReg(true);\n        return setTimeout(() => {\n          setredirect(true);\n        }, 3000);\n      }\n    }\n  }\n\n  const password = watch('password');\n\n  if (redirect) {\n    return /*#__PURE__*/React.createElement(Redirect, {\n      to: \"/sign-in\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 56,\n        columnNumber: 10\n      }\n    });\n  }\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"sign_up\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 3\n    }\n  }, /*#__PURE__*/React.createElement(\"form\", {\n    onSubmit: handleSubmit(onSubmit),\n    className: \"sign_up_form form\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 4\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"form__header-container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"h1\", {\n    className: \"form__header\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 6\n    }\n  }, \"Create new account\")), /*#__PURE__*/React.createElement(\"label\", {\n    className: \"form__input-group\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    className: `form__input-label' + ${errors.username ? ' form__input-label--error' : null}`,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 6\n    }\n  }, \"Username\"), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"text\",\n    name: \"username\",\n    placeholder: \"Username\",\n    className: `form__input ${errors.username ? ' form__input--error' : null}`,\n    autoFocus: true,\n    ref: register({\n      required: 'Введите логин',\n      minLength: {\n        value: 3,\n        message: 'Логин должен быть от 3 до 20 символов'\n      },\n      maxLength: {\n        value: 20,\n        message: 'Логин должен быть от 3 до 20 символов'\n      }\n    }),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 6\n    }\n  }), errors.username && /*#__PURE__*/React.createElement(\"span\", {\n    className: \"form__input-label form__input-label--error\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 7\n    }\n  }, errors.username.message)), /*#__PURE__*/React.createElement(\"label\", {\n    className: \"form__input-group\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    className: \"form__input-label\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 6\n    }\n  }, \"Email address\"), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"email\",\n    name: \"email\",\n    placeholder: \"Email address\",\n    className: \"form__input\",\n    ref: register({\n      required: 'Введите email',\n      pattern: {\n        value: /^[A-Z0-9._%+-]+@[A-Z0-9.-]+\\.[A-Z]{2,}$/i,\n        message: 'Введите корректный email'\n      }\n    }),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 6\n    }\n  }), errors.email && /*#__PURE__*/React.createElement(\"span\", {\n    className: \"form__input-label form__input-label--error\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 7\n    }\n  }, errors.email.message)), /*#__PURE__*/React.createElement(\"label\", {\n    className: \"form__input-group\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    className: \"form__input-label\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 6\n    }\n  }, \"Password\"), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"password\",\n    name: \"password\",\n    placeholder: \"Password\",\n    className: \"form__input\",\n    ref: register({\n      required: 'Введите пароль',\n      minLength: {\n        value: 8,\n        message: 'Пароль должен быть от 8 до 40 символов'\n      },\n      maxLength: {\n        value: 40,\n        message: 'Пароль должен быть от 6 до 40 символов'\n      }\n    }),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 6\n    }\n  }), errors.password && /*#__PURE__*/React.createElement(\"span\", {\n    className: \"form__input-label form__input-label--error\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 117,\n      columnNumber: 7\n    }\n  }, errors.password.message)), /*#__PURE__*/React.createElement(\"label\", {\n    className: \"form__input-group\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 120,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    className: \"form__input-label\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 121,\n      columnNumber: 6\n    }\n  }, \"Repeat Password\"), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"password\",\n    name: \"repeatPasword\",\n    placeholder: \"Repeat Password\",\n    className: \"form__input\",\n    ref: register({\n      required: 'Повторите пароль',\n      validate: value => value === password\n    }),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 122,\n      columnNumber: 6\n    }\n  }), errors.repeatPasword && /*#__PURE__*/React.createElement(\"span\", {\n    className: \"form__input-label form__input-label--error\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 133,\n      columnNumber: 7\n    }\n  }, 'Пароль не совпадает')), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"form__divider\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 136,\n      columnNumber: 5\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"form__policity\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 137,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    type: \"checkbox\",\n    className: \"form__policity-input\",\n    id: \"form__policity-label\",\n    name: \"policity\",\n    value: \"yes\",\n    ref: register({\n      required: 'Согласись'\n    }),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 138,\n      columnNumber: 6\n    }\n  }), /*#__PURE__*/React.createElement(\"label\", {\n    htmlFor: \"form__policity-label\",\n    className: `form__policity-label ${errors.policity ? 'form__policity-label--error' : null}`,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 146,\n      columnNumber: 6\n    }\n  }, \"I agree to the processing of my personal information\")), /*#__PURE__*/React.createElement(\"button\", {\n    type: \"submit\",\n    className: \"form__submit\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 153,\n      columnNumber: 5\n    }\n  }, \"Create\"), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"form__container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 156,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    className: \"form__text\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 157,\n      columnNumber: 6\n    }\n  }, \"Already have an account?\", ' ', /*#__PURE__*/React.createElement(Link, {\n    className: \"form__link\",\n    to: \"/sign-in\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 159,\n      columnNumber: 7\n    }\n  }, \"Sign In.\"))), sucsessReg ? /*#__PURE__*/React.createElement(Alert, {\n    message: \"Success Registration\",\n    type: \"success\",\n    style: {\n      marginBottom: '20px'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 165,\n      columnNumber: 6\n    }\n  }) : null, mainState.error ? renderErrors(mainState.error) : null));\n}\n\nconst mapStateToProps = state => {\n  return {\n    mainState: state.mainReducer\n  };\n};\n\nexport default connect(mapStateToProps, actions)(SignUp);","map":{"version":3,"sources":["/Users/apple/Documents/GIT/blogGit/blogGit/src/components/Forms/SignUp.jsx"],"names":["React","useEffect","useState","connect","Link","Redirect","useForm","Alert","actions","myService","renderErrors","SignUp","setUserInfo","setErrorInMain","mainState","redirect","setredirect","sucsessReg","setSucsessReg","register","handleSubmit","errors","watch","onSubmit","data","response","signUp","user","username","email","password","setTimeout","err","required","minLength","value","message","maxLength","pattern","validate","repeatPasword","policity","marginBottom","error","mapStateToProps","state","mainReducer"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { connect } from 'react-redux';\nimport { Link, Redirect } from 'react-router-dom';\nimport { useForm } from 'react-hook-form';\nimport './signUp.scss';\nimport { Alert } from 'antd';\nimport * as actions from '../../Redux/Actions/actions';\nimport { myService } from '../../services/serviceApi';\nimport { renderErrors } from './formsFunctions';\n\nfunction SignUp({ setUserInfo, setErrorInMain, mainState }) {\n\tconst [ redirect, setredirect ] = useState(false);\n\tconst [ sucsessReg, setSucsessReg ] = useState(false);\n\n\tconst { register, handleSubmit, errors, watch } = useForm();\n\tasync function onSubmit(data) {\n\t\ttry {\n\t\t\tconst response = await myService.signUp({\n\t\t\t\tuser: {\n\t\t\t\t\tusername: data.username,\n\t\t\t\t\temail: data.email,\n\t\t\t\t\tpassword: data.password\n\t\t\t\t}\n\t\t\t});\n\t\t\tif (response.errors) {\n\t\t\t\treturn setErrorInMain(response.errors);\n\t\t\t} else {\n\t\t\t\tsetUserInfo(response);\n\t\t\t\tsetSucsessReg(true);\n\t\t\t\treturn setTimeout(() => {\n\t\t\t\t\tsetredirect(true);\n\t\t\t\t}, 3000);\n\t\t\t}\n\t\t} catch (err) {\n\t\t\tconst response = await myService.signUp({\n\t\t\t\tuser: {\n\t\t\t\t\tusername: data.username,\n\t\t\t\t\temail: data.email,\n\t\t\t\t\tpassword: data.password\n\t\t\t\t}\n\t\t\t});\n\t\t\tif (response.errors) {\n\t\t\t\treturn setErrorInMain(response.errors);\n\t\t\t} else {\n\t\t\t\tsetUserInfo(response);\n\t\t\t\tsetSucsessReg(true);\n\t\t\t\treturn setTimeout(() => {\n\t\t\t\t\tsetredirect(true);\n\t\t\t\t}, 3000);\n\t\t\t}\n\t\t}\n\t}\n\tconst password = watch('password');\n\n\tif (redirect) {\n\t\treturn <Redirect to=\"/sign-in\" />;\n\t}\n\treturn (\n\t\t<div className=\"sign_up\">\n\t\t\t<form onSubmit={handleSubmit(onSubmit)} className=\"sign_up_form form\">\n\t\t\t\t<div className=\"form__header-container\">\n\t\t\t\t\t<h1 className=\"form__header\">Create new account</h1>\n\t\t\t\t</div>\n\t\t\t\t<label className=\"form__input-group\">\n\t\t\t\t\t<span className={`form__input-label' + ${errors.username ? ' form__input-label--error' : null}`}>\n\t\t\t\t\t\tUsername\n\t\t\t\t\t</span>\n\t\t\t\t\t<input\n\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\tname=\"username\"\n\t\t\t\t\t\tplaceholder=\"Username\"\n\t\t\t\t\t\tclassName={`form__input ${errors.username ? ' form__input--error' : null}`}\n\t\t\t\t\t\tautoFocus\n\t\t\t\t\t\tref={register({\n\t\t\t\t\t\t\trequired: 'Введите логин',\n\t\t\t\t\t\t\tminLength: { value: 3, message: 'Логин должен быть от 3 до 20 символов' },\n\t\t\t\t\t\t\tmaxLength: { value: 20, message: 'Логин должен быть от 3 до 20 символов' }\n\t\t\t\t\t\t})}\n\t\t\t\t\t/>\n\t\t\t\t\t{errors.username && (\n\t\t\t\t\t\t<span className=\"form__input-label form__input-label--error\">{errors.username.message}</span>\n\t\t\t\t\t)}\n\t\t\t\t</label>\n\t\t\t\t<label className=\"form__input-group\">\n\t\t\t\t\t<span className=\"form__input-label\">Email address</span>\n\t\t\t\t\t<input\n\t\t\t\t\t\ttype=\"email\"\n\t\t\t\t\t\tname=\"email\"\n\t\t\t\t\t\tplaceholder=\"Email address\"\n\t\t\t\t\t\tclassName=\"form__input\"\n\t\t\t\t\t\tref={register({\n\t\t\t\t\t\t\trequired: 'Введите email',\n\t\t\t\t\t\t\tpattern: {\n\t\t\t\t\t\t\t\tvalue: /^[A-Z0-9._%+-]+@[A-Z0-9.-]+\\.[A-Z]{2,}$/i,\n\t\t\t\t\t\t\t\tmessage: 'Введите корректный email'\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t})}\n\t\t\t\t\t/>\n\t\t\t\t\t{errors.email && (\n\t\t\t\t\t\t<span className=\"form__input-label form__input-label--error\">{errors.email.message}</span>\n\t\t\t\t\t)}\n\t\t\t\t</label>\n\t\t\t\t<label className=\"form__input-group\">\n\t\t\t\t\t<span className=\"form__input-label\">Password</span>\n\t\t\t\t\t<input\n\t\t\t\t\t\ttype=\"password\"\n\t\t\t\t\t\tname=\"password\"\n\t\t\t\t\t\tplaceholder=\"Password\"\n\t\t\t\t\t\tclassName=\"form__input\"\n\t\t\t\t\t\tref={register({\n\t\t\t\t\t\t\trequired: 'Введите пароль',\n\t\t\t\t\t\t\tminLength: { value: 8, message: 'Пароль должен быть от 8 до 40 символов' },\n\t\t\t\t\t\t\tmaxLength: { value: 40, message: 'Пароль должен быть от 6 до 40 символов' }\n\t\t\t\t\t\t})}\n\t\t\t\t\t/>\n\t\t\t\t\t{errors.password && (\n\t\t\t\t\t\t<span className=\"form__input-label form__input-label--error\">{errors.password.message}</span>\n\t\t\t\t\t)}\n\t\t\t\t</label>\n\t\t\t\t<label className=\"form__input-group\">\n\t\t\t\t\t<span className=\"form__input-label\">Repeat Password</span>\n\t\t\t\t\t<input\n\t\t\t\t\t\ttype=\"password\"\n\t\t\t\t\t\tname=\"repeatPasword\"\n\t\t\t\t\t\tplaceholder=\"Repeat Password\"\n\t\t\t\t\t\tclassName=\"form__input\"\n\t\t\t\t\t\tref={register({\n\t\t\t\t\t\t\trequired: 'Повторите пароль',\n\t\t\t\t\t\t\tvalidate: (value) => value === password\n\t\t\t\t\t\t})}\n\t\t\t\t\t/>\n\t\t\t\t\t{errors.repeatPasword && (\n\t\t\t\t\t\t<span className=\"form__input-label form__input-label--error\">{'Пароль не совпадает'}</span>\n\t\t\t\t\t)}\n\t\t\t\t</label>\n\t\t\t\t<div className=\"form__divider\" />\n\t\t\t\t<div className=\"form__policity\">\n\t\t\t\t\t<input\n\t\t\t\t\t\ttype=\"checkbox\"\n\t\t\t\t\t\tclassName=\"form__policity-input\"\n\t\t\t\t\t\tid=\"form__policity-label\"\n\t\t\t\t\t\tname=\"policity\"\n\t\t\t\t\t\tvalue=\"yes\"\n\t\t\t\t\t\tref={register({ required: 'Согласись' })}\n\t\t\t\t\t/>\n\t\t\t\t\t<label\n\t\t\t\t\t\thtmlFor=\"form__policity-label\"\n\t\t\t\t\t\tclassName={`form__policity-label ${errors.policity ? 'form__policity-label--error' : null}`}\n\t\t\t\t\t>\n\t\t\t\t\t\tI agree to the processing of my personal information\n\t\t\t\t\t</label>\n\t\t\t\t</div>\n\t\t\t\t<button type=\"submit\" className=\"form__submit\">\n\t\t\t\t\tCreate\n\t\t\t\t</button>\n\t\t\t\t<div className=\"form__container\">\n\t\t\t\t\t<span className=\"form__text\">\n\t\t\t\t\t\tAlready have an account?{' '}\n\t\t\t\t\t\t<Link className=\"form__link\" to=\"/sign-in\">\n\t\t\t\t\t\t\tSign In.\n\t\t\t\t\t\t</Link>\n\t\t\t\t\t</span>\n\t\t\t\t</div>\n\t\t\t\t{sucsessReg ? (\n\t\t\t\t\t<Alert message=\"Success Registration\" type=\"success\" style={{ marginBottom: '20px' }} />\n\t\t\t\t) : null}\n\t\t\t\t{mainState.error ? renderErrors(mainState.error) : null}\n\t\t\t</form>\n\t\t</div>\n\t);\n}\n\nconst mapStateToProps = (state) => {\n\treturn {\n\t\tmainState: state.mainReducer\n\t};\n};\n\nexport default connect(mapStateToProps, actions)(SignUp);\n"]},"metadata":{},"sourceType":"module"}